(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return j})),n.d(e,"l",(function(){return d})),n.d(e,"m",(function(){return O})),n.d(e,"k",(function(){return f})),n.d(e,"d",(function(){return g}));var r=n(4),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),o=Object(r.b)("contacts/fetchContactsError"),u=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),l=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/toggleCompletedRequest"),O=Object(r.b)("contacts/toggleCompletedSuccess"),f=Object(r.b)("contacts/toggleCompletedError"),g=Object(r.b)("contacts/changeFilter")},124:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(31),o=n.n(a),u=(n(74),n(8)),s=n(13),i=n(18),b={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getError:function(t){return t.auth.error},getToken:function(t){return t.auth.token}},l=n(2),j={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function d(){var t=Object(s.c)(b.getIsAuthenticated);return Object(l.jsxs)("nav",{children:[Object(l.jsx)(i.b,{to:"/",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Home"}),t&&Object(l.jsx)(i.b,{to:"/contacts",exact:!0,style:j.link,activeStyle:j.activeLink,children:"Phonebook"})]})}var O=n(34),f=n.p+"static/media/default-avatar.e44fc4e2.png",g={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function h(){var t=Object(s.b)(),e=Object(s.c)(b.getUsername),n=Object(r.useCallback)((function(){t(O.a.logOut())}),[t]);return Object(l.jsxs)("div",{style:g.container,children:[Object(l.jsx)("img",{src:f,alt:"",width:"32",style:g.avatar}),Object(l.jsxs)("span",{style:g.name,children:["Welcome, ",e]}),Object(l.jsx)("button",{type:"button",onClick:n,children:"Logout"})]})}var p={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},v=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/register",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Check in"}),Object(l.jsx)(i.b,{to:"/login",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Log in"})]})},x=n(138),k={header:{display:"flex",justifyContent:"space-between",alignItems:"center"}};function m(){var t=Object(s.c)(b.getIsAuthenticated);return Object(l.jsx)(x.a,{children:Object(l.jsxs)("header",{style:k.header,children:[Object(l.jsx)(d,{}),t?Object(l.jsx)(h,{}):Object(l.jsx)(v,{})]})})}var y=function(t){var e=t.children;return Object(l.jsx)("div",{className:"Container",children:e})},C=n(27),S=n(7);function E(t){t.isAuthenticated;var e=t.children,n=t.redirectTo,r=Object(S.a)(t,["isAuthenticated","children","redirectTo"]),c=Object(s.c)(b.getToken);return Object(l.jsx)(u.b,Object(C.a)(Object(C.a)({},r),{},{children:c?e:Object(l.jsx)(u.a,{to:n})}))}function R(t){t.isAuthenticated;var e=t.children,n=t.redirectTo,r=Object(S.a)(t,["isAuthenticated","children","redirectTo"]),c=Object(s.c)(b.getIsAuthenticated);return Object(l.jsx)(u.b,Object(C.a)(Object(C.a)({},r),{},{children:c&&r.restricted?Object(l.jsx)(u.a,{to:n}):e}))}var U=n(55),w=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,168))})),A=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,163))})),q=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,164))})),L=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,166))}));function T(){var t=Object(s.b)();return Object(r.useEffect)((function(){t(O.a.getCurrentUser())}),[t]),Object(l.jsxs)(y,{children:[Object(l.jsx)(m,{}),Object(l.jsx)(r.Suspense,{fallback:Object(l.jsx)(U.a,{}),children:Object(l.jsxs)(u.d,{children:[Object(l.jsx)(R,{exact:!0,path:"/",component:w}),Object(l.jsx)(R,{path:"/register",restricted:!0,redirectTo:"/contacts",component:A}),Object(l.jsx)(R,{path:"/login",restricted:!0,redirectTo:"/contacts",component:q}),Object(l.jsx)(E,{path:"/contacts",redirectTo:"/login",component:L})]})})]})}var z,I,B,F,W,_,D=n(22),J=n(3),N=n(9),P=n(4),H=n(11),M=Object(P.c)([],(z={},Object(J.a)(z,H.j,(function(t,e){return e.payload})),Object(J.a)(z,H.c,(function(t,e){return[e.payload].concat(Object(D.a)(t))})),Object(J.a)(z,H.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(J.a)(z,H.m,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),z)),G=Object(P.c)("",Object(J.a)({},H.d,(function(t,e){return e.payload}))),K=Object(P.c)(!1,(I={},Object(J.a)(I,H.i,(function(){return!0})),Object(J.a)(I,H.j,(function(){return!1})),Object(J.a)(I,H.h,(function(){return!1})),Object(J.a)(I,H.b,(function(){return!0})),Object(J.a)(I,H.c,(function(){return!1})),Object(J.a)(I,H.a,(function(){return!1})),Object(J.a)(I,H.f,(function(){return!0})),Object(J.a)(I,H.g,(function(){return!1})),Object(J.a)(I,H.e,(function(){return!1})),Object(J.a)(I,H.l,(function(){return!0})),Object(J.a)(I,H.m,(function(){return!1})),Object(J.a)(I,H.k,(function(){return!1})),I)),Q=Object(P.c)(null,{}),V=Object(N.c)({items:M,filter:G,loading:K,error:Q}),X=n(5),Y={name:null,email:null},Z=Object(P.c)(Y,(B={},Object(J.a)(B,X.a.registerSuccess,(function(t,e){return e.payload.user})),Object(J.a)(B,X.a.loginSuccess,(function(t,e){return e.payload.user})),Object(J.a)(B,X.a.logoutSuccess,(function(){return Y})),Object(J.a)(B,X.a.getCurrentUserSuccess,(function(t,e){return e.payload})),B)),$=Object(P.c)(null,(F={},Object(J.a)(F,X.a.registerSuccess,(function(t,e){return e.payload.token})),Object(J.a)(F,X.a.loginSuccess,(function(t,e){return e.payload.token})),Object(J.a)(F,X.a.logoutSuccess,(function(){return null})),F)),tt=function(t,e){return e.payload},et=Object(P.c)(null,(W={},Object(J.a)(W,X.a.registerError,tt),Object(J.a)(W,X.a.loginError,tt),Object(J.a)(W,X.a.logoutError,tt),Object(J.a)(W,X.a.getCurrentUserError,tt),W)),nt=Object(P.c)(!1,(_={},Object(J.a)(_,X.a.registerSuccess,(function(){return!0})),Object(J.a)(_,X.a.loginSuccess,(function(){return!0})),Object(J.a)(_,X.a.getCurrentUserSuccess,(function(){return!0})),Object(J.a)(_,X.a.registerError,(function(){return!1})),Object(J.a)(_,X.a.loginError,(function(){return!1})),Object(J.a)(_,X.a.getCurrentUserError,(function(){return!1})),Object(J.a)(_,X.a.logoutSuccess,(function(){return!1})),_)),rt=Object(N.c)({user:Z,isAuthenticated:nt,token:$,error:et}),ct=n(21),at=n(64),ot=n.n(at),ut=Object(D.a)(Object(P.d)({serializableCheck:{ignoredActions:[ct.a,ct.f,ct.b,ct.c,ct.d,ct.e]}})),st={key:"auth",storage:ot.a,whitelist:["token"]},it=Object(P.a)({reducer:{auth:Object(ct.g)(st,rt),contacts:V},middleware:ut,devTools:!1}),bt={store:it,persistor:Object(ct.h)(it)},lt=n(65);o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(s.a,{store:bt.store,children:Object(l.jsx)(lt.a,{loading:null,persistor:bt.persistor,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(T,{})})})})}),document.getElementById("root"))},34:function(t,e,n){"use strict";var r=n(20),c=n.n(r),a=n(29),o=n(23),u=n.n(o),s=n(5);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){u.a.defaults.headers.common.Authorization=""},l={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.a.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,i(r.data.token),n(s.a.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(s.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s.a.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:b(),e(s.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(s.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.a.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,i(r.data.token),n(s.a.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(s.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(a),e(s.a.getCurrentUserRequest()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:o=t.sent,e(s.a.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(s.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}};e.a=l},5:function(t,e,n){"use strict";var r=n(4),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),loginRequest:u,loginSuccess:s,loginError:i,getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")};e.a=b},55:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(61),c=n(26),a=n(67),o=n(66),u=n(0),s=n(62),i=n.n(s),b=n(63),l=n.n(b),j=n(2),d=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(i.a,{className:l.a.loader,type:"Circles",color:"#3f51b5",height:150,width:150})})}}]),n}(u.Component)},63:function(t,e,n){t.exports={loader:"Loader_loader__1z6Fm"}},74:function(t,e,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.134eaf6b.chunk.js.map